<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trauma Impact Assessment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      color: #333;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #444;
    }

    .question {
      margin-bottom: 20px;
    }

    .question label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .question .options {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #666;
    }

    .question .options label {
      font-weight: normal;
    }

    button {
      display: block;
      width: 100%;
      padding: 10px;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background: #0056b3;
    }

    .report-section {
      margin-top: 30px;
    }

    .hidden {
      display: none;
    }

    #reportContent {
      white-space: pre-line;
      background: #f9f9f9;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Trauma Impact Assessment</h1>
    <form id="traumaForm">
      <!-- Questionnaire -->
      <div class="question">
        <label>1. How often do you experience flashbacks of the traumatic event?</label>
        <div class="options">
          <label><input type="radio" name="q1" value="0"> Never</label>
          <label><input type="radio" name="q1" value="1"> Rarely</label>
          <label><input type="radio" name="q1" value="2"> Sometimes</label>
          <label><input type="radio" name="q1" value="3"> Often</label>
          <label><input type="radio" name="q1" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>2. How much does the event affect your ability to concentrate?</label>
        <div class="options">
          <label><input type="radio" name="q2" value="0"> Not at all</label>
          <label><input type="radio" name="q2" value="1"> Slightly</label>
          <label><input type="radio" name="q2" value="2"> Moderately</label>
          <label><input type="radio" name="q2" value="3"> Severely</label>
          <label><input type="radio" name="q2" value="4"> Extremely</label>
        </div>
      </div>

      <div class="question">
        <label>3. How often do you avoid situations that remind you of the event?</label>
        <div class="options">
          <label><input type="radio" name="q3" value="0"> Never</label>
          <label><input type="radio" name="q3" value="1"> Rarely</label>
          <label><input type="radio" name="q3" value="2"> Sometimes</label>
          <label><input type="radio" name="q3" value="3"> Often</label>
          <label><input type="radio" name="q3" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>4. How much does the event affect your sleep?</label>
        <div class="options">
          <label><input type="radio" name="q4" value="0"> Not at all</label>
          <label><input type="radio" name="q4" value="1"> Slightly</label>
          <label><input type="radio" name="q4" value="2"> Moderately</label>
          <label><input type="radio" name="q4" value="3"> Severely</label>
          <label><input type="radio" name="q4" value="4"> Extremely</label>
        </div>
      </div>

      <div class="question">
        <label>5. How often do you feel emotionally numb?</label>
        <div class="options">
          <label><input type="radio" name="q5" value="0"> Never</label>
          <label><input type="radio" name="q5" value="1"> Rarely</label>
          <label><input type="radio" name="q5" value="2"> Sometimes</label>
          <label><input type="radio" name="q5" value="3"> Often</label>
          <label><input type="radio" name="q5" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>6. How often do you feel irritable or have angry outbursts?</label>
        <div class="options">
          <label><input type="radio" name="q6" value="0"> Never</label>
          <label><input type="radio" name="q6" value="1"> Rarely</label>
          <label><input type="radio" name="q6" value="2"> Sometimes</label>
          <label><input type="radio" name="q6" value="3"> Often</label>
          <label><input type="radio" name="q6" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>7. How often do you feel hypervigilant (on edge)?</label>
        <div class="options">
          <label><input type="radio" name="q7" value="0"> Never</label>
          <label><input type="radio" name="q7" value="1"> Rarely</label>
          <label><input type="radio" name="q7" value="2"> Sometimes</label>
          <label><input type="radio" name="q7" value="3"> Often</label>
          <label><input type="radio" name="q7" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>8. How often do you feel detached from others?</label>
        <div class="options">
          <label><input type="radio" name="q8" value="0"> Never</label>
          <label><input type="radio" name="q8" value="1"> Rarely</label>
          <label><input type="radio" name="q8" value="2"> Sometimes</label>
          <label><input type="radio" name="q8" value="3"> Often</label>
          <label><input type="radio" name="q8" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>9. How often do you feel guilty about the event?</label>
        <div class="options">
          <label><input type="radio" name="q9" value="0"> Never</label>
          <label><input type="radio" name="q9" value="1"> Rarely</label>
          <label><input type="radio" name="q9" value="2"> Sometimes</label>
          <label><input type="radio" name="q9" value="3"> Often</label>
          <label><input type="radio" name="q9" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>10. How often do you feel shame about the event?</label>
        <div class="options">
          <label><input type="radio" name="q10" value="0"> Never</label>
          <label><input type="radio" name="q10" value="1"> Rarely</label>
          <label><input type="radio" name="q10" value="2"> Sometimes</label>
          <label><input type="radio" name="q10" value="3"> Often</label>
          <label><input type="radio" name="q10" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>11. How often do you feel hopeless about the future?</label>
        <div class="options">
          <label><input type="radio" name="q11" value="0"> Never</label>
          <label><input type="radio" name="q11" value="1"> Rarely</label>
          <label><input type="radio" name="q11" value="2"> Sometimes</label>
          <label><input type="radio" name="q11" value="3"> Often</label>
          <label><input type="radio" name="q11" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>12. How often do you feel a sense of danger even when there is none?</label>
        <div class="options">
          <label><input type="radio" name="q12" value="0"> Never</label>
          <label><input type="radio" name="q12" value="1"> Rarely</label>
          <label><input type="radio" name="q12" value="2"> Sometimes</label>
          <label><input type="radio" name="q12" value="3"> Often</label>
          <label><input type="radio" name="q12" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>13. How often do you feel physically tense or on edge?</label>
        <div class="options">
          <label><input type="radio" name="q13" value="0"> Never</label>
          <label><input type="radio" name="q13" value="1"> Rarely</label>
          <label><input type="radio" name="q13" value="2"> Sometimes</label>
          <label><input type="radio" name="q13" value="3"> Often</label>
          <label><input type="radio" name="q13" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>14. How often do you feel emotionally exhausted?</label>
        <div class="options">
          <label><input type="radio" name="q14" value="0"> Never</label>
          <label><input type="radio" name="q14" value="1"> Rarely</label>
          <label><input type="radio" name="q14" value="2"> Sometimes</label>
          <label><input type="radio" name="q14" value="3"> Often</label>
          <label><input type="radio" name="q14" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>15. How often do you feel like you are reliving the event?</label>
        <div class="options">
          <label><input type="radio" name="q15" value="0"> Never</label>
          <label><input type="radio" name="q15" value="1"> Rarely</label>
          <label><input type="radio" name="q15" value="2"> Sometimes</label>
          <label><input type="radio" name="q15" value="3"> Often</label>
          <label><input type="radio" name="q15" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>16. How often do you feel like you are in a daze or disconnected from reality?</label>
        <div class="options">
          <label><input type="radio" name="q16" value="0"> Never</label>
          <label><input type="radio" name="q16" value="1"> Rarely</label>
          <label><input type="radio" name="q16" value="2"> Sometimes</label>
          <label><input type="radio" name="q16" value="3"> Often</label>
          <label><input type="radio" name="q16" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>17. How often do you feel like you are unable to trust others?</label>
        <div class="options">
          <label><input type="radio" name="q17" value="0"> Never</label>
          <label><input type="radio" name="q17" value="1"> Rarely</label>
          <label><input type="radio" name="q17" value="2"> Sometimes</label>
          <label><input type="radio" name="q17" value="3"> Often</label>
          <label><input type="radio" name="q17" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>18. How often do you feel like you are unable to experience positive emotions?</label>
        <div class="options">
          <label><input type="radio" name="q18" value="0"> Never</label>
          <label><input type="radio" name="q18" value="1"> Rarely</label>
          <label><input type="radio" name="q18" value="2"> Sometimes</label>
          <label><input type="radio" name="q18" value="3"> Often</label>
          <label><input type="radio" name="q18" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>19. How often do you feel like you are unable to cope with daily stressors?</label>
        <div class="options">
          <label><input type="radio" name="q19" value="0"> Never</label>
          <label><input type="radio" name="q19" value="1"> Rarely</label>
          <label><input type="radio" name="q19" value="2"> Sometimes</label>
          <label><input type="radio" name="q19" value="3"> Often</label>
          <label><input type="radio" name="q19" value="4"> Always</label>
        </div>
      </div>

      <div class="question">
        <label>20. How often do you feel like you are unable to move on from the event?</label>
        <div class="options">
          <label><input type="radio" name="q20" value="0"> Never</label>
          <label><input type="radio" name="q20" value="1"> Rarely</label>
          <label><input type="radio" name="q20" value="2"> Sometimes</label>
          <label><input type="radio" name="q20" value="3"> Often</label>
          <label><input type="radio" name="q20" value="4"> Always</label>
        </div>
      </div>

      <button type="submit">Generate Report</button>
    </form>

    <!-- Report Section -->
    <div id="report" class="report-section hidden">
      <h2>Trauma Impact Assessment Report</h2>
      <p id="reportContent"></p>
      <button id="downloadPdf">Download PDF</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    document.getElementById('traumaForm').addEventListener('submit', function (e) {
      e.preventDefault();

      // Get user responses
      let totalScore = 0;
      for (let i = 1; i <= 20; i++) {
        const questionName = q${i};
        const selectedOption = document.querySelector(input[name="${questionName}"]:checked);
        if (selectedOption) {
          totalScore += parseInt(selectedOption.value);
        }
      }

      // Determine severity level
      const severityLevel = getSeverityLevel(totalScore);

      // Generate report
      const reportContent = `
        Trauma Impact Assessment Report:
        -------------------------------
        Total Score: ${totalScore}
        Severity Level: ${severityLevel}
      `;

      // Display report
      const reportSection = document.getElementById('report');
      const reportContentElement = document.getElementById('reportContent');
      reportContentElement.textContent = reportContent;
      reportSection.classList.remove('hidden');

      // Add event listener for PDF download
      document.getElementById('downloadPdf').addEventListener('click', function () {
        generatePdf(reportContent);
      });
    });

    // Function to determine severity level
    function getSeverityLevel(score) {
      if (score <= 20) return "Mild";
      if (score <= 40) return "Moderate";
      if (score <= 60) return "Severe";
      return "Extreme";
    }

    // Function to generate PDF
    function generatePdf(content) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("Trauma Impact Assessment Report", 10, 20);

      doc.setFontSize(12);
      const splitContent = doc.splitTextToSize(content, 180);
      doc.text(splitContent, 10, 30);

      doc.save("Trauma_Impact_Report.pdf");
    }
  </script>
</body>
</html>
